{
    "title": "Personal Rules (@madogiwa)",
    "rules": [

        {
            "description": "(@madogiwa) [IME|MS-Office] Control+Shift+J to japanese_kana",
            "manipulators": [

                {
                    "type": "basic",
                    "from": <%= from("j", ["control","shift"], ["caps_lock"]) %>,
                    "to": <%= to([["japanese_kana", []]]) %>,
                    "conditions": [
                        {
                            "type": "frontmost_application_if",
                            "bundle_identifiers": [
                                "^com\\.microsoft\\.Word$",
                                "^com\\.microsoft\\.Excel$",
                                "^com\\.microsoft\\.Powerpoint$",
                                "^com\\.microsoft\\.Outlook$",
                                "^com\\.microsoft\\.onenote\\.mac$"
                            ]
                        }
                    ]
                }

            ]
        },

        {
            "description": "(@madogiwa) [IME|MS-Office] Control+Shift+K to japanese_eisuu",
            "manipulators": [

                {
                    "type": "basic",
                    "from": <%= from("k", ["control","shift"], ["caps_lock"]) %>,
                    "to": <%= to([["japanese_eisuu", []]]) %>,
                    "conditions": [
                        {
                            "type": "frontmost_application_if",
                            "bundle_identifiers": [
                                "^com\\.microsoft\\.Word$",
                                "^com\\.microsoft\\.Excel$",
                                "^com\\.microsoft\\.Powerpoint$",
                                "^com\\.microsoft\\.Outlook$",
                                "^com\\.microsoft\\.onenote\\.mac$"
                            ]
                        }
                    ]
                }

            ]
        },

        {
            "description": "(@madogiwa) [Emacs Mode] Control+Shift+/ to Command+Shift+Z",
            "manipulators": [

                {
                    "type": "basic",
                    "from": <%= from("slash", ["control","shift"], ["caps_lock"]) %>,
                    "to": <%= to([["z", ["left_command","left_shift"]]]) %>,
                    "to_after_key_up": [
                        { "set_variable": { "name": "emacs_mode_markset", "value": 0 } }
                    ],
                    "conditions": [
                        <%= frontmost_application_unless("emacs_mode_key_bindings_exception") %>,
                        { "type": "variable_if", "name": "emacs_mode_cx", "value": 0 }
                    ]
                }

            ]
        },

        {
            "description": "(@madogiwa) Send ESC with japanese_eisuu in Terminal App",
            "manipulators": [

                {
                    "type": "basic",
                    "from": <%= from("escape", [], ["caps_lock"]) %>,
                    "to": <%= to([["escape", []], ["japanese_eisuu", []]]) %>,
                    "conditions": [
                        {
                            "type": "frontmost_application_if",
                            "bundle_identifiers": [
                                "^com\\.apple\\.Terminal$",
                                "^com\\.googlecode\\.iterm2$"
                            ]
                        },
                        {
                            "type": "input_source_if",
                            "input_sources": [
                                { "language": "^ja$" }
                            ]
                        }
                    ]
                },

                {
                    "type": "basic",
                    "from": <%= from("open_bracket", ["control"], ["caps_lock"]) %>,
                    "to": <%= to([["open_bracket", ["left_control"]], ["japanese_eisuu", []]]) %>,
                    "conditions": [
                        {
                            "type": "frontmost_application_if",
                            "bundle_identifiers": [
                                "^com\\.apple\\.Terminal$",
                                "^com\\.googlecode\\.iterm2$"
                            ]
                        },
                        {
                            "type": "input_source_if",
                            "input_sources": [
                                { "language": "^ja$" }
                            ]
                        }
                    ]
                }

            ]
        }

    ]
}
